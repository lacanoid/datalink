\pset null _null_
SET client_min_messages = warning;
SET search_path=datalink;
select dlvalue('http://www.ljudmila.org');
           dlvalue           
-----------------------------
 (http://www.ljudmila.org,,)
(1 row)

select dlvalue('http://www.ljudmila.org','URL','Example datalink');
                    dlvalue                    
-----------------------------------------------
 (http://www.ljudmila.org,,"Example datalink")
(1 row)

select dlvalue('/tmp','FS','Example file datalink');
                dlvalue                 
----------------------------------------
 (file:///tmp,,"Example file datalink")
(1 row)

select dlvalue('file:///tmp','URL','Example file datalink #2');
                  dlvalue                  
-------------------------------------------
 (file:///tmp,,"Example file datalink #2")
(1 row)

select dlcomment(dlvalue('http://www.ljudmila.org','URL','Example datalink'));
    dlcomment     
------------------
 Example datalink
(1 row)

select dlurlcomplete(dlvalue('http://www.ljudmila.org','URL','Example datalink'));
      dlurlcomplete      
-------------------------
 http://www.ljudmila.org
(1 row)

select dlurlcompleteonly(dlvalue('http://www.ljudmila.org','URL','Example datalink'));
    dlurlcompleteonly    
-------------------------
 http://www.ljudmila.org
(1 row)

select dlnewcopy(dlvalue('http://www.ljudmila.org'),0);
          dlnewcopy          
-----------------------------
 (http://www.ljudmila.org,,)
(1 row)

select (dlnewcopy(dlvalue('http://www.ljudmila.org'),1)).token is not null;
 ?column? 
----------
 t
(1 row)

select dlpreviouscopy(dlvalue('http://www.ljudmila.org'),0);
       dlpreviouscopy        
-----------------------------
 (http://www.ljudmila.org,,)
(1 row)

select (dlpreviouscopy(dlvalue('http://www.ljudmila.org'),1)).token is not null;
 ?column? 
----------
 t
(1 row)

select dl_options(link_control=>'FILE');
 dl_options 
------------
          1
(1 row)

select dl_options(link_control=>'FILE',integrity=>'ALL',read_access=>'DB',write_access=>'BLOCKED');
 dl_options 
------------
      12577
(1 row)

select * from dl_lco(dl_options(link_control=>'FILE',integrity=>'ALL',read_access=>'DB',write_access=>'BLOCKED'));
 link_control | integrity | read_access | write_access | recovery | on_unlink 
--------------+-----------+-------------+--------------+----------+-----------
 FILE         | ALL       | DB          | ADMIN TOKEN  | NO       | NONE
(1 row)

select * from dl_lco(dl_options(link_control=>'FILE',integrity=>'ALL',recovery=>'YES',on_unlink=>'RESTORE'));
 link_control | integrity | read_access | write_access | recovery | on_unlink 
--------------+-----------+-------------+--------------+----------+-----------
 FILE         | ALL       | FS          | FS           | YES      | RESTORE
(1 row)

